#!/bin/bash
whois $1 | awk '/^Registrant Name:/{print "Registrant Name, "$3" "$4}/^Registrant Organization:/{print "Registrant Organization, "substr($0,index($0,$3))}/^Registrant Street:/{print "Registrant Street, "substr($0,index($0,$3))}/^Registrant City:/{print "Registrant City, "substr($0,index($0,$3))}/^Registrant State\/Province:/{val=substr($0,index($0,$3));print "Registrant State/Province, "val}/^Registrant Postal Code:/{print "Registrant Postal Code, "substr($0,index($0,$4))}/^Registrant Country:/{print "Registrant Country, "$3}/^Registrant Phone:/{gsub(/^Registrant Phone: */,"");print "Registrant Phone, "$0}/^Registrant Phone Ext:/{val=substr($0,index($0,$4));if(val=="Registrant Phone Ext:")val="";print "Registrant Phone Ext:, "val}/^Registrant Fax:/{val=substr($0,index($0,$3));if(val=="Registrant Fax:")val="";print "Registrant Fax, "val}/^Registrant Fax Ext:/{val=substr($0,index($0,$4));if(val=="Registrant Fax Ext:")val="";print "Registrant Fax Ext:, "val}/^Registrant Email:/{print "Registrant Email, "$3}/^Admin Name:/{print "Admin Name, "$3" "$4}/^Admin Organization:/{print "Admin Organization, "substr($0,index($0,$3))}/^Admin Street:/{print "Admin Street, "substr($0,index($0,$3))}/^Admin City:/{print "Admin City, "substr($0,index($0,$3))}/^Admin State\/Province:/{print "Admin State/Province, "substr($0,index($0,$3))}/^Admin Postal Code:/{print "Admin Postal Code, "substr($0,index($0,$4))}/^Admin Country:/{print "Admin Country, "$3}/^Admin Phone:/{gsub(/^Admin Phone: */,"");print "Admin Phone, "$0}/^Admin Phone Ext:/{val=substr($0,index($0,$4));if(val=="Admin Phone Ext:")val="";print "Admin Phone Ext:, "val}/^Admin Fax:/{val=substr($0,index($0,$3));if(val=="Admin Fax:")val="";print "Admin Fax, "val}/^Admin Fax Ext:/{val=substr($0,index($0,$4));if(val=="Admin Fax Ext:")val="";print "Admin Fax Ext:, "val}/^Admin Email:/{print "Admin Email, "$3}/^Tech Name:/{print "Tech Name, "$3" "$4}/^Tech Organization:/{print "Tech Organization, "substr($0,index($0,$3))}/^Tech Street:/{print "Tech Street, "substr($0,index($0,$3))}/^Tech City:/{print "Tech City, "substr($0,index($0,$3))}/^Tech State\/Province:/{print "Tech State/Province, "substr($0,index($0,$3))}/^Tech Postal Code:/{print "Tech Postal Code, "substr($0,index($0,$4))}/^Tech Country:/{print "Tech Country, "$3}/^Tech Phone:/{gsub(/^Tech Phone: */,"");print "Tech Phone, "$0}/^Tech Phone Ext:/{val=substr($0,index($0,$4));if(val=="Tech Phone Ext:")val="";print "Tech Phone Ext:, "val}/^Tech Fax:/{val=substr($0,index($0,$3));if(val=="Tech Fax:")val="";print "Tech Fax, "val}/^Tech Fax Ext:/{val=substr($0,index($0,$4));if(val=="Tech Fax Ext:")val="";print "Tech Fax Ext:, "val}/^Tech Email:/{print "Tech Email, "$3}' > $1.csv
